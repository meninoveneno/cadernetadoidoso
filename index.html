<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Caderneta Virtual do Idoso</title>
  <style>
    /* Estilos básicos */
    body {
      font-family: Arial, sans-serif;
      font-size: 18px;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      background: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 30px;
      border-radius: 8px;
    }
    /* Abas */
    .tabs {
      display: flex;
      overflow-x: auto;
      padding: 0;
      list-style: none;
      border-bottom: 2px solid #ddd;
      -webkit-overflow-scrolling: touch;
      margin-bottom: 20px;
    }
    .tabs li {
      text-align: center;
      padding: 14px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      background-color: #f0f0f0;
      border-radius: 5px;
      transition: all 0.3s ease;
      flex-shrink: 0;
      min-width: 140px;
      margin-right: 8px;
    }
    .tabs li.active {
      background-color: #007BFF;
      color: white;
      box-shadow: 0 4px 6px rgba(0, 123, 255, 0.3);
    }
    .tabs li:hover {
      background-color: #0056b3;
      color: white;
    }
    /* Conteúdo das abas */
    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease-in-out;
    }
    .tab-content.active {
      display: block;
    }
    /* Formulários */
    form label {
      display: block;
      margin-top: 12px;
      font-size: 18px;
    }
    form input,
    form select,
    form textarea {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 18px;
    }
    form textarea {
      resize: vertical;
      min-height: 100px;
    }
    /* Botões */
    button {
      margin-top: 20px;
      padding: 16px 24px;
      border: none;
      background: #28a745;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
      font-size: 18px;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #218838;
    }
    #addMedicamento, #addVacina {
      background: #17a2b8;
    }
    #addMedicamento:hover, #addVacina:hover {
      background: #117a8b;
    }
    /* Popup de confirmação */
    .popup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #28a745;
      color: #fff;
      padding: 12px 20px;
      border-radius: 4px;
      font-size: 18px;
      opacity: 0;
      transition: opacity 0.5s;
    }
    .popup.show {
      opacity: 1;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    /* Responsividade */
    @media(max-width: 600px) {
      .tabs li {
        font-size: 16px;
        padding: 10px;
        min-width: 110px;
      }
      button, form input, form select, form textarea {
        font-size: 16px;
        padding: 10px;
      }
      form label {
        font-size: 16px;
      }
    }
    .review-buttons {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 20px;
    }
    /* Estilos do Modal de Monitoramento */
    #monitoramentoOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      z-index: 900;
    }
    #monitoramentoScreen {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      padding: 20px;
      border: 2px solid #007BFF;
      border-radius: 8px;
      z-index: 1000;
      display: none;
      width: 90%;
      max-width: 400px;
    }
    #monitoramentoScreen h3 {
      margin-top: 0;
    }
    #monitoramentoScreen button {
      margin-top: 10px;
      width: 48%;
    }
  </style>
</head>
<body>
  <!-- Tela de Edição -->
  <div id="editScreen" class="container">
    <!-- Menu de abas -->
    <ul class="tabs">
      <li class="tab active" data-tab="identificacao">Identificação</li>
      <li class="tab" data-tab="vacinacao">Vacinação</li>
      <li class="tab" data-tab="doencas">Doenças Crônicas e Alergias</li>
      <li class="tab" data-tab="medicamentos">Medicamentos em Uso</li>
      <li class="tab" data-tab="recomendacoes">Recomendações/Anotações Médicas</li>
    </ul>

    <!-- Conteúdo das abas -->
    <div class="tab-content active" id="identificacao">
      <form id="form-identificacao">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome">
        <label for="dataNascimento">Data de Nascimento:</label>
        <input type="date" id="dataNascimento" name="dataNascimento">
        <label for="idade">Idade:</label>
        <input type="number" id="idade" name="idade">
        <label for="peso">Peso (kg):</label>
        <input type="number" id="peso" name="peso">
        <label for="contato">Contato:</label>
        <input type="tel" id="contato" name="contato">
        <label for="contatoEmergencia">Contato de Emergência:</label>
        <input type="tel" id="contatoEmergencia" name="contatoEmergencia">
      </form>
    </div>

    <div class="tab-content" id="vacinacao">
      <div id="vacinasContainer">
        <!-- Formulário inicial para uma vacina -->
        <div class="vacina-form">
          <label for="nomeVacina">Nome da Vacina:</label>
          <input type="text" class="nomeVacina" name="nomeVacina[]">
          <label for="dataAplicacao">Data de Aplicação:</label>
          <input type="date" class="dataAplicacao" name="dataAplicacao[]">
          <label for="loteVacina">Lote:</label>
          <input type="text" class="loteVacina" name="loteVacina[]">
          <label for="observacoesVacina">Observações:</label>
          <textarea class="observacoesVacina" name="observacoesVacina[]"></textarea>
        </div>
      </div>
      <button type="button" id="addVacina">Adicionar Vacina</button>
    </div>

    <div class="tab-content" id="doencas">
      <form id="form-doencas">
        <label><input type="checkbox" id="hipertensao" name="hipertensao"> Hipertensão</label>
        <label><input type="checkbox" id="diabetes" name="diabetes"> Diabetes</label>
        <label><input type="checkbox" id="cardiopatias" name="cardiopatias"> Cardiopatias</label>
        <label><input type="checkbox" id="chagas" name="chagas"> Chagas</label>
        <label for="outrasDoencas">Outras Doenças/Alergias:</label>
        <input type="text" id="outrasDoencas" name="outrasDoencas">
      </form>
    </div>

    <div class="tab-content" id="medicamentos">
      <form id="form-medicamentos">
        <div id="medicamentosContainer">
          <!-- Bloco inicial de medicamento -->
          <div class="medicamento">
            <label>Nome do Medicamento:</label>
            <input type="text" name="nomeMedicamento[]">
            <label>Dose:</label>
            <input type="text" name="doseMedicamento[]">
            <label>Posologia:</label>
            <input type="text" name="posologiaMedicamento[]">
            <label>Horário:</label>
            <input type="time" name="horarioMedicamento[]">
          </div>
        </div>
        <button type="button" id="addMedicamento">Adicionar Medicamento</button>
      </form>
    </div>

    <div class="tab-content" id="recomendacoes">
      <form id="form-recomendacoes">
        <label for="anotacoes">Anotações Médicas:</label>
        <textarea id="anotacoes" name="anotacoes"></textarea>
        <button type="button" id="shareBtn">Compartilhar com os filhos</button>
      </form>
    </div>

    <!-- Botão Salvar Dados -->
    <button id="saveBtn">Salvar Dados</button>

    <!-- Popup de confirmação -->
    <div id="popup" class="popup">Dados salvos com sucesso!</div>
  </div>

  <!-- Tela de Revisão (visualização somente) -->
  <div id="reviewScreen" class="container" style="display: none;">
    <h2>Resumo dos Dados Salvos</h2>
    <div id="reviewContent"></div>
    <div class="review-buttons">
      <button id="exportBtn">Exportar</button>
      <button id="monitoramentoBtn">Monitoramento</button>
      <button id="editBtn">Editar</button>
    </div>
  </div>

  <!-- Modal de Monitoramento (PA e Glicemia) -->
  <div id="monitoramentoOverlay"></div>
  <div id="monitoramentoScreen">
    <h3>Mapeamento de PA e Glicemia</h3>
    <form id="form-monitoramento">
      <label for="paMonitor">Pressão Arterial (PA):</label>
      <input type="text" id="paMonitor" name="paMonitor" placeholder="ex: 120/80">
      <label for="glicemiaMonitor">Glicemia:</label>
      <input type="number" id="glicemiaMonitor" name="glicemiaMonitor">
      <div style="display: flex; justify-content: space-between;">
        <button type="button" id="saveMonitorBtn">Salvar Monitoramento</button>
        <button type="button" id="closeMonitorBtn">Fechar</button>
      </div>
    </form>
  </div>

  <!-- jsPDF (para gerar o PDF) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    // Lógica das abas
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.getAttribute('data-tab')).classList.add('active');
      });
    });

    // Adicionar medicamento dinamicamente (novo bloco com campo "Horário")
    document.getElementById('addMedicamento').addEventListener('click', () => {
      const container = document.getElementById('medicamentosContainer');
      const newBlock = document.createElement('div');
      newBlock.classList.add('medicamento');
      newBlock.innerHTML = `
        <label>Nome do Medicamento:</label>
        <input type="text" name="nomeMedicamento[]">
        <label>Dose:</label>
        <input type="text" name="doseMedicamento[]">
        <label>Posologia:</label>
        <input type="text" name="posologiaMedicamento[]">
        <label>Horário:</label>
        <input type="time" name="horarioMedicamento[]">
      `;
      container.appendChild(newBlock);
    });

    // Adicionar vacina dinamicamente
    document.getElementById('addVacina').addEventListener('click', () => {
      const container = document.getElementById('vacinasContainer');
      const newBlock = document.createElement('div');
      newBlock.classList.add('vacina-form');
      newBlock.innerHTML = `
        <label for="nomeVacina">Nome da Vacina:</label>
        <input type="text" class="nomeVacina" name="nomeVacina[]">
        <label for="dataAplicacao">Data de Aplicação:</label>
        <input type="date" class="dataAplicacao" name="dataAplicacao[]">
        <label for="loteVacina">Lote:</label>
        <input type="text" class="loteVacina" name="loteVacina[]">
        <label for="observacoesVacina">Observações:</label>
        <textarea class="observacoesVacina" name="observacoesVacina[]"></textarea>
      `;
      container.appendChild(newBlock);
    });

    // Atualiza a tela de revisão com os dados salvos, incluindo o monitoramento
    function updateReviewScreen() {
      const savedData = JSON.parse(localStorage.getItem('formData'));
      if (savedData) {
        let content = `<h3>Identificação</h3>
          <p><strong>Nome:</strong> ${savedData.nome}</p>
          <p><strong>Data de Nascimento:</strong> ${savedData.dataNascimento}</p>
          <p><strong>Idade:</strong> ${savedData.idade}</p>
          <p><strong>Peso (kg):</strong> ${savedData.peso}</p>
          <p><strong>Contato:</strong> ${savedData.contato}</p>
          <p><strong>Contato de Emergência:</strong> ${savedData.contatoEmergencia}</p>`;
          
        content += `<h3>Vacinação</h3>`;
        if (savedData.vacinas && savedData.vacinas.length > 0) {
          savedData.vacinas.forEach((vacina, index) => {
            content += `<p><strong>Vacina ${index+1}:</strong></p>
              <p><strong>Nome:</strong> ${vacina.nome}</p>
              <p><strong>Data de Aplicação:</strong> ${vacina.dataAplicacao}</p>
              <p><strong>Lote:</strong> ${vacina.lote}</p>
              <p><strong>Observações:</strong> ${vacina.observacoes}</p>`;
          });
        } else {
          content += `<p>Nenhuma vacina registrada.</p>`;
        }
          
        content += `<h3>Doenças Crônicas e Alergias</h3>
          <p><strong>Hipertensão:</strong> ${savedData.doenças && savedData.doenças.hipertensao ? 'Sim' : 'Não'}</p>
          <p><strong>Diabetes:</strong> ${savedData.doenças && savedData.doenças.diabetes ? 'Sim' : 'Não'}</p>
          <p><strong>Cardiopatias:</strong> ${savedData.doenças && savedData.doenças.cardiopatias ? 'Sim' : 'Não'}</p>
          <p><strong>Chagas:</strong> ${savedData.doenças && savedData.doenças.chagas ? 'Sim' : 'Não'}</p>
          <p><strong>Outras Doenças/Alergias:</strong> ${savedData.doenças ? savedData.doenças.outrasDoencas : ''}</p>`;
          
        content += `<h3>Medicamentos em Uso</h3>`;
        savedData.medicamentos.forEach((med, index) => {
          content += `<p><strong>Medicamento ${index+1}:</strong></p>
            <p><strong>Nome:</strong> ${med.nome}</p>
            <p><strong>Dose:</strong> ${med.dose}</p>
            <p><strong>Posologia:</strong> ${med.posologia}</p>
            <p><strong>Horário:</strong> ${med.horario}</p>`;
        });
          
        content += `<h3>Mapeamento de PA e Glicemia</h3>`;
        if (savedData.monitoramento && savedData.monitoramento.length > 0) {
          savedData.monitoramento.forEach((measurement, index) => {
            content += `<p><strong>Aferição ${index+1}:</strong> ${measurement.datetime} - PA: ${measurement.pa} | Glicemia: ${measurement.glicemia}</p>`;
          });
        } else {
          content += `<p>Nenhuma aferição registrada.</p>`;
        }
          
        content += `<h3>Recomendações/Anotações Médicas</h3>
          <p>${savedData.anotacoes}</p>`;
          
        document.getElementById('reviewContent').innerHTML = content;
      }
    }

    // Ao salvar, armazena os dados (exceto os novos monitoramentos) e navega para a tela de revisão
    document.getElementById('saveBtn').addEventListener('click', () => {
      const formData = {
        nome: document.getElementById('nome').value,
        dataNascimento: document.getElementById('dataNascimento').value,
        idade: document.getElementById('idade').value,
        peso: document.getElementById('peso').value,
        contato: document.getElementById('contato').value,
        contatoEmergencia: document.getElementById('contatoEmergencia').value,
        vacinas: Array.from(document.querySelectorAll('.vacina-form')).map(form => ({
          nome: form.querySelector('.nomeVacina').value,
          dataAplicacao: form.querySelector('.dataAplicacao').value,
          lote: form.querySelector('.loteVacina').value,
          observacoes: form.querySelector('.observacoesVacina').value
        })),
        doenças: {
          hipertensao: document.getElementById('hipertensao').checked,
          diabetes: document.getElementById('diabetes').checked,
          cardiopatias: document.getElementById('cardiopatias').checked,
          chagas: document.getElementById('chagas').checked,
          outrasDoencas: document.getElementById('outrasDoencas').value
        },
        medicamentos: Array.from(document.querySelectorAll('input[name="nomeMedicamento[]"]')).map((input, index) => ({
          nome: input.value,
          dose: document.querySelectorAll('input[name="doseMedicamento[]"]')[index].value,
          posologia: document.querySelectorAll('input[name="posologiaMedicamento[]"]')[index].value,
          horario: document.querySelectorAll('input[name="horarioMedicamento[]"]')[index].value,
        })),
        anotacoes: document.getElementById('anotacoes').value
      };

      // Preserva os monitoramentos já registrados, se houver
      const existingData = JSON.parse(localStorage.getItem('formData'));
      if (existingData && existingData.monitoramento) {
        formData.monitoramento = existingData.monitoramento;
      } else {
        formData.monitoramento = [];
      }
      
      localStorage.setItem('formData', JSON.stringify(formData));
      
      // Exibe popup de confirmação
      const popup = document.getElementById('popup');
      popup.textContent = "Dados salvos com sucesso!";
      popup.classList.add('show');
      setTimeout(() => popup.classList.remove('show'), 3000);
      
      // Atualiza a tela de revisão e navega para ela
      updateReviewScreen();
      document.getElementById('editScreen').style.display = 'none';
      document.getElementById('reviewScreen').style.display = 'block';
    });

    // Botão "Editar" - volta para a tela de edição
    document.getElementById('editBtn').addEventListener('click', () => {
      document.getElementById('reviewScreen').style.display = 'none';
      document.getElementById('editScreen').style.display = 'block';
    });

    // Botão "Exportar" - gera o PDF com os dados salvos (incluindo os monitoramentos)
    document.getElementById('exportBtn').addEventListener('click', () => {
      const savedData = JSON.parse(localStorage.getItem('formData'));
      if (!savedData) return;
      
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      let y = 10;
      
      // Cabeçalho com identificação do paciente
      doc.setFontSize(16);
      doc.text(`Paciente: ${savedData.nome}`, 10, y);
      y += 10;
      doc.setFontSize(12);
      
      let lines = [];
      lines.push("Identificação:");
      lines.push(`Nome: ${savedData.nome}`);
      lines.push(`Data de Nascimento: ${savedData.dataNascimento}`);
      lines.push(`Idade: ${savedData.idade}`);
      lines.push(`Peso (kg): ${savedData.peso}`);
      lines.push(`Contato: ${savedData.contato}`);
      lines.push(`Contato de Emergência: ${savedData.contatoEmergencia}`);
      lines.push("");
      lines.push("Vacinação:");
      if (savedData.vacinas && savedData.vacinas.length > 0) {
        savedData.vacinas.forEach((vacina, index) => {
          lines.push(`Vacina ${index+1}:`);
          lines.push(`  Nome: ${vacina.nome}`);
          lines.push(`  Data de Aplicação: ${vacina.dataAplicacao}`);
          lines.push(`  Lote: ${vacina.lote}`);
          lines.push(`  Observações: ${vacina.observacoes}`);
        });
      } else {
        lines.push("Nenhuma vacina registrada.");
      }
      lines.push("");
      lines.push("Doenças Crônicas e Alergias:");
      lines.push(`Hipertensão: ${savedData.doenças.hipertensao ? 'Sim' : 'Não'}`);
      lines.push(`Diabetes: ${savedData.doenças.diabetes ? 'Sim' : 'Não'}`);
      lines.push(`Cardiopatias: ${savedData.doenças.cardiopatias ? 'Sim' : 'Não'}`);
      lines.push(`Chagas: ${savedData.doenças.chagas ? 'Sim' : 'Não'}`);
      lines.push(`Outras Doenças/Alergias: ${savedData.doenças.outrasDoencas}`);
      lines.push("");
      lines.push("Medicamentos em Uso:");
      savedData.medicamentos.forEach((med, index) => {
        lines.push(`Medicamento ${index+1}:`);
        lines.push(`  Nome: ${med.nome}`);
        lines.push(`  Dose: ${med.dose}`);
        lines.push(`  Posologia: ${med.posologia}`);
        lines.push(`  Horário: ${med.horario}`);
      });
      lines.push("");
      lines.push("Mapeamento de PA e Glicemia:");
      if (savedData.monitoramento && savedData.monitoramento.length > 0) {
        savedData.monitoramento.forEach((measurement, index) => {
          lines.push(`Aferição ${index+1} (${measurement.datetime}): PA: ${measurement.pa}, Glicemia: ${measurement.glicemia}`);
        });
      } else {
        lines.push("Nenhuma aferição registrada.");
      }
      lines.push("");
      lines.push("Recomendações/Anotações Médicas:");
      lines.push(savedData.anotacoes);
      
      lines.forEach(line => {
        if (y > 280) {
          doc.addPage();
          y = 10;
        }
        doc.text(line, 10, y);
        y += 7;
      });
      
      doc.save('dados_caderneta.pdf');
    });

    // Botão "Monitoramento" - exibe o modal para inserir uma nova aferição
    document.getElementById('monitoramentoBtn').addEventListener('click', () => {
      // Limpa os campos para nova aferição
      document.getElementById('paMonitor').value = '';
      document.getElementById('glicemiaMonitor').value = '';
      document.getElementById('monitoramentoOverlay').style.display = 'block';
      document.getElementById('monitoramentoScreen').style.display = 'block';
    });

    // Botão "Fechar" no modal de monitoramento
    document.getElementById('closeMonitorBtn').addEventListener('click', () => {
      document.getElementById('monitoramentoOverlay').style.display = 'none';
      document.getElementById('monitoramentoScreen').style.display = 'none';
    });

    // Botão "Salvar Monitoramento" no modal
    document.getElementById('saveMonitorBtn').addEventListener('click', () => {
      const savedData = JSON.parse(localStorage.getItem('formData')) || {};
      const measurement = {
        pa: document.getElementById('paMonitor').value,
        glicemia: document.getElementById('glicemiaMonitor').value,
        datetime: new Date().toLocaleString('pt-BR')
      };
      if (!savedData.monitoramento) {
        savedData.monitoramento = [];
      }
      savedData.monitoramento.push(measurement);
      localStorage.setItem('formData', JSON.stringify(savedData));
      const popup = document.getElementById('popup');
      popup.textContent = "Monitoramento salvo com sucesso!";
      popup.classList.add('show');
      setTimeout(() => {
        popup.classList.remove('show');
        popup.textContent = "Dados salvos com sucesso!";
      }, 3000);
      document.getElementById('monitoramentoOverlay').style.display = 'none';
      document.getElementById('monitoramentoScreen').style.display = 'none';
      updateReviewScreen();
    });

    // Recuperar dados ao carregar a página (preenche o formulário, se houver dados salvos)
    window.addEventListener('load', () => {
      const savedData = JSON.parse(localStorage.getItem('formData'));
      if (savedData) {
        document.getElementById('nome').value = savedData.nome || '';
        document.getElementById('dataNascimento').value = savedData.dataNascimento || '';
        document.getElementById('idade').value = savedData.idade || '';
        document.getElementById('peso').value = savedData.peso || '';
        document.getElementById('contato').value = savedData.contato || '';
        document.getElementById('contatoEmergencia').value = savedData.contatoEmergencia || '';
        document.getElementById('hipertensao').checked = savedData.doenças?.hipertensao || false;
        document.getElementById('diabetes').checked = savedData.doenças?.diabetes || false;
        document.getElementById('cardiopatias').checked = savedData.doenças?.cardiopatias || false;
        document.getElementById('chagas').checked = savedData.doenças?.chagas || false;
        document.getElementById('outrasDoencas').value = savedData.doenças?.outrasDoencas || '';
        if (savedData.medicamentos && savedData.medicamentos.length) {
          savedData.medicamentos.forEach((medicamento, index) => {
            if (index === 0) {
              document.querySelector('input[name="nomeMedicamento[]"]').value = medicamento.nome || '';
              document.querySelector('input[name="doseMedicamento[]"]').value = medicamento.dose || '';
              document.querySelector('input[name="posologiaMedicamento[]"]').value = medicamento.posologia || '';
              document.querySelector('input[name="horarioMedicamento[]"]').value = medicamento.horario || '';
            } else {
              const newBlock = document.createElement('div');
              newBlock.classList.add('medicamento');
              newBlock.innerHTML = `
                <label>Nome do Medicamento:</label>
                <input type="text" name="nomeMedicamento[]" value="${medicamento.nome}">
                <label>Dose:</label>
                <input type="text" name="doseMedicamento[]" value="${medicamento.dose}">
                <label>Posologia:</label>
                <input type="text" name="posologiaMedicamento[]" value="${medicamento.posologia}">
                <label>Horário:</label>
                <input type="time" name="horarioMedicamento[]" value="${medicamento.horario}">
              `;
              document.getElementById('medicamentosContainer').appendChild(newBlock);
            }
          });
        }
        if (savedData.vacinas && savedData.vacinas.length) {
          savedData.vacinas.forEach((vacina, index) => {
            if (index === 0) {
              document.querySelector('.nomeVacina').value = vacina.nome || '';
              document.querySelector('.dataAplicacao').value = vacina.dataAplicacao || '';
              document.querySelector('.loteVacina').value = vacina.lote || '';
              document.querySelector('.observacoesVacina').value = vacina.observacoes || '';
            } else {
              const newBlock = document.createElement('div');
              newBlock.classList.add('vacina-form');
              newBlock.innerHTML = `
                <label for="nomeVacina">Nome da Vacina:</label>
                <input type="text" class="nomeVacina" name="nomeVacina[]" value="${vacina.nome}">
                <label for="dataAplicacao">Data de Aplicação:</label>
                <input type="date" class="dataAplicacao" name="dataAplicacao[]" value="${vacina.dataAplicacao}">
                <label for="loteVacina">Lote:</label>
                <input type="text" class="loteVacina" name="loteVacina[]" value="${vacina.lote}">
                <label for="observacoesVacina">Observações:</label>
                <textarea class="observacoesVacina" name="observacoesVacina[]">${vacina.observacoes}</textarea>
              `;
              document.getElementById('vacinasContainer').appendChild(newBlock);
            }
          });
        }
        // Não preenche os campos do modal de monitoramento, pois serão usados para nova aferição
        document.getElementById('anotacoes').value = savedData.anotacoes || '';
      }
    });
  </script>
</body>
</html>
